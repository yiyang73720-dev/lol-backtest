(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(74838);let r=["top","jungle","mid","bot","support"],l=["Top","Jungle","Mid","Bot","Support"];function n(e){let t=e.toLowerCase(),a=r.indexOf(t);return a>=0?a:99}let c={LCK:"#c8aa6e",LPL:"#e84057",LEC:"#00c8ff",LCS:"#00b4d8"},i={top:"TOP",jungle:"JNG",mid:"MID",bot:"BOT",support:"SUP"};function d({stats:e}){if(!e||0===e.gamesPlayed)return(0,t.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-700 text-gray-400",children:"No data"});let a=100*e.winRate,s=a>=60?"text-green-400":a>=50?"text-yellow-400":"text-red-400",r=a>=60?"bg-green-900/40":a>=50?"bg-yellow-900/40":"bg-red-900/40";return(0,t.jsxs)("span",{className:`text-xs px-1.5 py-0.5 rounded ${r} ${s} font-mono`,children:[a.toFixed(0),"% (",e.gamesPlayed,"g)"]})}function o({player:e}){return(0,t.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-gray-500 w-7 font-mono",children:i[e.role.toLowerCase()]||e.role}),e.playerName?(0,t.jsx)("span",{className:"text-sm font-medium w-28 truncate",title:e.playerName,children:e.playerName}):(0,t.jsx)("span",{className:"text-sm text-gray-600 w-28 italic",children:"—"}),(0,t.jsx)("span",{className:"text-sm text-blue-300 w-24 truncate",title:e.champion,children:e.champion}),(0,t.jsx)(d,{stats:e.championStats})]})}function m({bans:e,label:a}){return 0===e.length?null:(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[(0,t.jsxs)("span",{className:"text-[10px] text-gray-500 uppercase mr-1",children:[a,":"]}),e.map((e,a)=>(0,t.jsx)("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-red-900/30 text-red-400 border border-red-800/30",children:e},a))]})}function x({players:e}){if(0===e.length)return null;let a=e.reduce((e,t)=>e+(t.championStats?.gamesPlayed||0),0),s=e.filter(e=>e.championStats&&e.championStats.gamesPlayed>0).length>0?e.filter(e=>e.championStats&&e.championStats.gamesPlayed>0).reduce((e,t)=>e+(t.championStats?.winRate||0),0)/e.filter(e=>e.championStats&&e.championStats.gamesPlayed>0).length:0,r=(100*s).toFixed(0);return(0,t.jsxs)("div",{className:"flex items-center gap-3 text-[11px] text-gray-400 mt-1",children:[(0,t.jsxs)("span",{children:["Avg champ WR: ",(0,t.jsxs)("span",{className:`font-mono ${s>=.55?"text-green-400":s>=.48?"text-yellow-400":"text-red-400"}`,children:[r,"%"]})]}),(0,t.jsxs)("span",{children:["Total champ exp: ",(0,t.jsxs)("span",{className:"font-mono text-gray-300",children:[a,"g"]})]})]})}function p({game:e,prediction:a,onPredict:s,cardIndex:r,currentIndex:l}){let n=r===l,i=null!==a,d=c[e.league]||"#888";return r>l?(0,t.jsxs)("div",{className:"rounded-xl border border-[#2a2a42] bg-[#1a1a2e]/50 p-4 opacity-40",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs font-bold px-2 py-0.5 rounded",style:{color:d,backgroundColor:`${d}20`},children:e.league}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.dateUtc).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"text-center text-gray-500 mt-3",children:[e.team1," vs ",e.team2]}),(0,t.jsx)("div",{className:"text-center text-[11px] text-gray-600 mt-1",children:"Waiting..."})]}):(0,t.jsxs)("div",{className:`rounded-xl border p-5 transition-all duration-300 ${n?"border-blue-500/50 bg-[#1a1a2e] shadow-lg shadow-blue-900/20 scale-[1.01]":r<l?"border-[#2a2a42] bg-[#1a1a2e]/80":"border-[#2a2a42] bg-[#1a1a2e]/50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-bold px-2 py-0.5 rounded",style:{color:d,backgroundColor:`${d}20`},children:e.league}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.tournament})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.patch&&(0,t.jsxs)("span",{className:"text-[10px] text-gray-600",children:["Patch ",e.patch]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.dateUtc).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:`rounded-lg p-3 ${i&&e.winTeam===e.team1?"bg-green-900/20 border border-green-700/30":i&&e.winTeam===e.team2?"bg-red-900/10 border border-red-800/20":"bg-[#12121f] border border-transparent"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-bold text-base",children:e.team1}),i&&e.winTeam===e.team1&&(0,t.jsx)("span",{className:"text-xs font-bold text-green-400 bg-green-900/40 px-2 py-0.5 rounded",children:"WINNER"})]}),(0,t.jsx)("div",{className:"space-y-0.5",children:e.team1Players.map((e,a)=>(0,t.jsx)(o,{player:e},a))}),(0,t.jsx)(x,{players:e.team1Players}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(m,{bans:e.team1Bans,label:"Bans"})})]}),(0,t.jsxs)("div",{className:`rounded-lg p-3 ${i&&e.winTeam===e.team2?"bg-green-900/20 border border-green-700/30":i&&e.winTeam===e.team1?"bg-red-900/10 border border-red-800/20":"bg-[#12121f] border border-transparent"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-bold text-base",children:e.team2}),i&&e.winTeam===e.team2&&(0,t.jsx)("span",{className:"text-xs font-bold text-green-400 bg-green-900/40 px-2 py-0.5 rounded",children:"WINNER"})]}),(0,t.jsx)("div",{className:"space-y-0.5",children:e.team2Players.map((e,a)=>(0,t.jsx)(o,{player:e},a))}),(0,t.jsx)(x,{players:e.team2Players}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(m,{bans:e.team2Bans,label:"Bans"})})]})]}),i&&e.gameLength&&(0,t.jsxs)("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Game length: ",e.gameLength]}),n&&!i&&(0,t.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Who wins this game?"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>s(e.gameId,e.team1),className:"px-6 py-2.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-white font-bold text-sm transition-colors",children:e.team1}),(0,t.jsx)("button",{onClick:()=>s(e.gameId,e.team2),className:"px-6 py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm transition-colors",children:e.team2})]})]}),i&&(0,t.jsx)("div",{className:`mt-4 text-center py-2 rounded-lg ${a.correct?"bg-green-900/20 text-green-400":"bg-red-900/20 text-red-400"}`,children:(0,t.jsxs)("span",{className:"text-sm font-bold",children:[a.correct?"Correct!":"Wrong"," — You picked"," ",a.predictedWinner]})})]})}function g({predictions:e,totalGames:a}){let s=e.filter(e=>e.correct).length,r=e.length,l=r>0?(s/r*100).toFixed(1):"—";return(0,t.jsxs)("div",{className:"flex items-center gap-6 px-6 py-3 rounded-xl bg-[#1a1a2e] border border-[#2a2a42]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-white",children:s}),(0,t.jsx)("span",{className:"text-gray-500",children:"/"}),(0,t.jsx)("span",{className:"text-xl text-gray-400",children:r}),(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"correct"})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-[#2a2a42]"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{className:`text-2xl font-bold font-mono ${0===r?"text-gray-500":parseFloat(l)>=55?"text-green-400":parseFloat(l)>=45?"text-yellow-400":"text-red-400"}`,children:[l,"%"]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"accuracy"})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-[#2a2a42]"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:a-r}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"remaining"})]}),(0,t.jsx)("div",{className:"ml-auto flex gap-0.5",children:e.slice(-10).map((e,a)=>(0,t.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${e.correct?"bg-green-400":"bg-red-400"}`,title:`${e.correct?"Correct":"Wrong"}: ${e.predictedWinner}`},a))})]})}let h=[{id:"LCK",name:"LCK",color:"#c8aa6e"},{id:"LPL",name:"LPL",color:"#e84057"},{id:"LEC",name:"LEC",color:"#00c8ff"},{id:"LCS",name:"LCS",color:"#00b4d8"}];function u({activeLeagues:e,onToggle:a}){return(0,t.jsx)("div",{className:"flex gap-2",children:h.map(s=>{let r=e.has(s.id);return(0,t.jsx)("button",{onClick:()=>a(s.id),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${r?"border-2":"border-2 border-transparent opacity-40 hover:opacity-70"}`,style:r?{color:s.color,borderColor:s.color,backgroundColor:`${s.color}15`}:{color:s.color},children:s.name},s.id)})})}let b="lol-backtest-predictions";function j(e){localStorage.setItem(b,JSON.stringify(e))}function f(){let[e,r]=(0,a.useState)([]),[c,i]=(0,a.useState)([]),[d,o]=(0,a.useState)(new Set(["LCK","LPL","LEC","LCS"])),[m,x]=(0,a.useState)(!0),[h,f]=(0,a.useState)(null),[y,N]=(0,a.useState)(0);(0,a.useEffect)(()=>{i(function(){try{let e=localStorage.getItem(b);return e?JSON.parse(e):[]}catch{return[]}}())},[]),(0,a.useEffect)(()=>{x(!0),f(null);try{let e=Array.from(d),t=function(e,t=7){let a=s.default,r=new Date;r.setDate(r.getDate()-t);let c=r.toISOString().slice(0,10),i=(a.games||[]).filter(t=>e.includes(t.league)&&t.dateUtc.slice(0,10)>=c);if(0===i.length)return[];let d=new Map;for(let e of a.championStats||[])d.set(e.key,e);let o=a.playerRecords||[];return i.map(e=>{let t,a,s=o.filter(t=>t.gameId===e.gameId);return s.length>=10?(t=s.filter(t=>t.team.toLowerCase()===e.team1.toLowerCase()).sort((e,t)=>n(e.role)-n(t.role)).map(e=>({playerName:e.playerName,champion:e.champion,role:e.role,championStats:d.get(`${e.playerName}|||${e.champion}`)||null})),a=s.filter(t=>t.team.toLowerCase()===e.team2.toLowerCase()).sort((e,t)=>n(e.role)-n(t.role)).map(e=>({playerName:e.playerName,champion:e.champion,role:e.role,championStats:d.get(`${e.playerName}|||${e.champion}`)||null}))):(t=(e.team1Picks||[]).map((e,t)=>({playerName:"",champion:e,role:l[t]||"",championStats:null})),a=(e.team2Picks||[]).map((e,t)=>({playerName:"",champion:e,role:l[t]||"",championStats:null}))),{...e,team1Players:t,team2Players:a}})}(e,14);r(t)}catch(e){f(String(e))}finally{x(!1)}},[d]),(0,a.useEffect)(()=>{if(0===e.length)return;let t=new Set(c.map(e=>e.gameId)),a=e.findIndex(e=>!t.has(e.gameId));N(a>=0?a:e.length)},[e,c]);let v=(0,a.useCallback)((t,a)=>{let s=e.find(e=>e.gameId===t);if(!s)return;let r={gameId:t,predictedWinner:a,actualWinner:s.winTeam,correct:a===s.winTeam,timestamp:Date.now()},l=[...c.filter(e=>e.gameId!==t),r];i(l),j(l)},[e,c]),w=(0,a.useCallback)(e=>{o(t=>{let a=new Set(t);return a.has(e)?a.size>1&&a.delete(e):a.add(e),a})},[]),S=(0,a.useCallback)(()=>{i([]),j([]),N(0)},[]),C=c.filter(t=>e.some(e=>e.gameId===t.gameId)),L=e.reduce((e,t)=>{let a=t.dateUtc.split(" ")[0];return e[a]||(e[a]=[]),e[a].push(t),e},{}),k=y>=e.length&&e.length>0;return(0,t.jsxs)("main",{className:"min-h-screen pb-20",children:[(0,t.jsx)("div",{className:"sticky top-0 z-50 bg-[#0f0f1a]/95 backdrop-blur-sm border-b border-[#2a2a42]",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("h1",{className:"text-xl font-bold",children:["LoL Backtest",(0,t.jsx)("span",{className:"text-gray-500 text-sm font-normal ml-2",children:"Last 7 Days"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(u,{activeLeagues:d,onToggle:w}),c.length>0&&(0,t.jsx)("button",{onClick:S,className:"text-xs text-gray-500 hover:text-red-400 transition-colors px-2 py-1 rounded border border-gray-700 hover:border-red-800",children:"Reset"})]})]}),e.length>0&&(0,t.jsx)(g,{predictions:C,totalGames:e.length})]})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 mt-6",children:[m&&(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"inline-block w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-gray-500 mt-3 text-sm",children:"Fetching games from Leaguepedia..."}),(0,t.jsx)("p",{className:"text-gray-600 mt-1 text-xs",children:"Rate-limited to 1 request per 5 seconds. This may take a moment."})]}),h&&(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsxs)("p",{className:"text-red-400 text-sm",children:["Error: ",h]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-3 text-sm text-blue-400 hover:text-blue-300",children:"Retry"})]}),!m&&!h&&0===e.length&&(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("p",{className:"text-gray-400 text-lg",children:"No games found"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:"Try selecting different leagues or check back later."})]}),k&&(0,t.jsxs)("div",{className:"text-center py-8 mb-6 rounded-xl bg-gradient-to-b from-blue-900/20 to-transparent border border-blue-800/30",children:[(0,t.jsx)("p",{className:"text-xl font-bold text-blue-400",children:"Session Complete!"}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:["You predicted ",C.filter(e=>e.correct).length,"/",C.length," correct (",C.length>0?(C.filter(e=>e.correct).length/C.length*100).toFixed(1):0,"%)"]}),(0,t.jsx)("button",{onClick:S,className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Start Over"})]}),(0,t.jsx)("div",{className:"space-y-8",children:Object.entries(L).map(([a,s])=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-gray-500 mb-3 sticky top-28 bg-[#0f0f1a] py-1 z-10",children:new Date(a+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,t.jsx)("div",{className:"space-y-4",children:s.map(a=>{let s=e.indexOf(a),r=c.find(e=>e.gameId===a.gameId)||null;return(0,t.jsx)(p,{game:a,prediction:r,onPredict:v,cardIndex:s,currentIndex:y},a.gameId)})})]},a))})]})]})}e.s(["default",()=>f],52683)}]);